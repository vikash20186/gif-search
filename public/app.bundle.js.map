{"version":3,"sources":["webpack:///webpack/bootstrap 1fe82923da113a28eeec","webpack:///./src/app.js","webpack:///./src/gif-service.js","webpack:///./src/app-config.js","webpack:///./src/http-service.js","webpack:///./src/search-list-view.js"],"names":["ajaxRequestService","gifService","afterDomLoadedEvent","template","document","querySelector","innerHTML","searchListElem","searchBtnElem","searchTextElem","searchListView","addEventListener","GifService","networkConfig","httpService","searchURL","appServerURL","searchText","getResults","then","requestInfo","response","offset","isRequestInProgress","getData","meta","status","data","processGifs","console","log","Error","length","pagination","total_count","canFetchMore","concat","fullResponse","gifs","map","versions","gif","images","versionNames","Object","keys","smallerSizes","filter","versionName","width","url","sort","a","b","assign","preview","AppConfig","AJAXRequestService","fetch","contentType","headers","get","includes","json","TypeError","SearchListView","gifSearchService","elems","parentElem","init","onSearchClickBind","onSearchClick","bind","onSearchTextKeyDownBind","onSearchTextKeyDown","onScrollBind","onScroll","lastScrollTop","screenHeight","screen","height","event","keyCode","value","getGifSearchResults","updateView","clearView","preventDefault","scrollTop","window","pageYOffset","documentElement","requestAnimationFrame","onScrollDown","bottomMargin","scrollHeight","getNext","obj","documentFragmentElem","createDocumentFragment","getElem","forEach","appendChild","divElem","index","createElement","classList","add","setAttribute","imgElem","src","style","divInfoElem","childNodes","counter","removeChild","removeEventListener","clearEvents"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1fe82923da113a28eeec","import {GifService} from './gif-service.js';\r\nimport {AppConfig} from './app-config.js';\r\nimport {AJAXRequestService} from './http-service.js';\r\nimport {SearchListView} from './search-list-view.js';\r\n\r\nvar ajaxRequestService = new AJAXRequestService();\r\nvar gifService = new GifService(AppConfig, ajaxRequestService);\r\n\r\nfunction afterDomLoadedEvent(){\r\n\t\r\n\tvar template = document.querySelector(\"#item-template\").innerHTML;\r\n\tvar searchListElem = document.querySelector(\"#search-list\");\r\n\tvar searchBtnElem = document.querySelector(\"#search-button\");\r\n\tvar searchTextElem = document.querySelector(\"#search-text\");\r\n\t\r\n\tvar searchListView = new SearchListView(gifService, template, {\r\n\t\tsearchListElem,\r\n\t\tsearchBtnElem,\r\n\t\tsearchTextElem\r\n\t});\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", afterDomLoadedEvent);\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","export class GifService {\r\n  \r\n  constructor(networkConfig, httpService){\r\n    this.networkConfig = networkConfig;\r\n    this.searchURL = \"/gifs/search?api_key=GZKGwdu6xlIM0iV58yFKJOFLqj0NLXFw&q=\";\r\n    this.searchURL = this.networkConfig.appServerURL + this.searchURL;\r\n    this.httpService = httpService;\r\n  }\r\n  \r\n  \r\n  getGifSearchResults(searchText){\r\n    \r\n    return this.getResults(searchText).then(response => {\r\n      this.requestInfo = {\r\n        searchText,\r\n        response\r\n      };\r\n      return response;\r\n    })\r\n  }\r\n\r\n  getResults(searchText, offset=0){\r\n    var searchURL = this.searchURL + searchText + \"&offset=\" + offset;\r\n    this.isRequestInProgress = true;\r\n    return this.httpService.getData(searchURL).then(response => {\r\n      this.isRequestInProgress = false;\r\n      if (response.meta && response.meta.status === 200 && response.data){\r\n        response.data = this.processGifs(response.data);\r\n        return response;\r\n      } else {\r\n        console.log(\"error in getting response\", response);\r\n        throw new Error(\"respose error\");\r\n      }\r\n    })\r\n  }\r\n\r\n  canFetchMore(){\r\n    if (!this.requestInfo){\r\n      return false;\r\n    }\r\n    return (this.requestInfo.response.data.length < this.requestInfo.response.pagination.total_count)\r\n      && !this.isRequestInProgress;\r\n  }\r\n\r\n  getNext(){\r\n    \r\n    if (!this.requestInfo){\r\n      throw Error(\"getData is not called yet\");\r\n    }\r\n\r\n    if (!this.canFetchMore()){\r\n      throw Error(\"no more data to be feteched\");\r\n    }\r\n\r\n    var offset = this.requestInfo.response.data.length;\r\n    return this.getResults(this.requestInfo.searchText, offset).then(response => {\r\n      this.requestInfo.response.data = this.requestInfo.response.data.concat(response.data);\r\n      return {\r\n        response,\r\n        fullResponse : this.requestInfo.response\r\n      }\r\n    })\r\n  }\r\n  \r\n  processGifs(gifs){\r\n    return gifs.map(gif => {\r\n      //Get gif version which's width is close to 250 or less\r\n      var versions = gif.images;\r\n      var versionNames = Object.keys(versions);\r\n      var smallerSizes = versionNames.filter(versionName => versions[versionName].width <= 250 && versions[versionName].url)\r\n                          .map(versionName => versions[versionName]);\r\n      smallerSizes = smallerSizes.sort((a,b) => b.width - a.width);\r\n      //console.log(smallerSizes[0]);\r\n      return Object.assign({\r\n        preview : smallerSizes[0],\r\n      }, gif);\r\n    })\r\n  }\r\n\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/gif-service.js","export class AppConfig {\r\n  constructor(){\r\n    this.appServerURL = \"https://api.giphy.com/v1\";\r\n  }\r\n\r\n  static get appServerURL(){\r\n  \treturn \"https://api.giphy.com/v1\";\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app-config.js","export class AJAXRequestService{\r\n  \r\n  getData(url){\r\n    return fetch(url).then(response => {\r\n      var contentType = response.headers.get(\"content-type\");\r\n      if(contentType && contentType.includes(\"application/json\")) {\r\n        return response.json();\r\n      }\r\n      throw new TypeError(\"Oops, we haven't got JSON!\");\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/http-service.js","export class SearchListView {\r\n\tconstructor(gifSearchService, template, elems){\r\n\t\tthis.template = template;\r\n\t\tthis.parentElem = elems.searchListElem;\r\n\t\tthis.elems = elems;\r\n\t\tthis.gifService = gifSearchService;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit(){\r\n\t\tthis.onSearchClickBind = this.onSearchClick.bind(this);\r\n\t\tthis.onSearchTextKeyDownBind = this.onSearchTextKeyDown.bind(this);\r\n\t\tthis.onScrollBind = this.onScroll.bind(this);\r\n\r\n\t\tthis.elems.searchBtnElem.addEventListener(\"click\", this.onSearchClickBind);\r\n\t\tthis.elems.searchTextElem.addEventListener(\"keydown\", this.onSearchTextKeyDownBind);\r\n\t\tdocument.addEventListener(\"scroll\", this.onScrollBind);\r\n\t\t\r\n\t\tthis.lastScrollTop = 0;\r\n\t\tthis.screenHeight = screen.height;\r\n\t}\r\n\r\n\tonSearchTextKeyDown(event){\r\n\t\tif (event.keyCode === 13){\r\n\t\t\tthis.onSearchClick(event);\r\n\t\t}\r\n\t}\r\n\r\n\tonSearchClick(event){\r\n\t\tvar searchText = this.elems.searchTextElem.value;\r\n\t\tif (!searchText){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.gifService.getGifSearchResults(searchText).then(response => {\r\n\t\t\tthis.updateView(response.data);\r\n\t\t});\r\n\t\tthis.clearView();\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tonScroll(event){\r\n\t\tvar scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n\t\tif (this.lastScrollTop < scrollTop){\r\n\t\t\trequestAnimationFrame(()=>{\r\n\t\t\t\tthis.onScrollDown(event);\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.lastScrollTop = scrollTop;\r\n\t}\r\n\r\n\tonScrollDown(event){\r\n\t\tvar scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n\t\tif (this.gifService.canFetchMore()){\r\n\t\t\tvar bottomMargin = document.documentElement.scrollHeight - (scrollTop + this.screenHeight);\r\n\t\t\tif (bottomMargin < 250){\r\n\t\t\t\tthis.gifService.getNext().then(obj => {\r\n\t\t\t\t\tthis.updateView(obj.response.data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateView(gifs){\r\n\t\tvar documentFragmentElem = document.createDocumentFragment();\r\n\t\tgifs.map(this.getElem)\r\n\t\t\t.forEach(divElem => {\r\n\t\t\t\tdocumentFragmentElem.appendChild(divElem);\r\n\t\t\t});\r\n\t\tthis.parentElem.appendChild(documentFragmentElem);\r\n\t}\r\n\r\n\tgetElem(gif, index){\r\n\t\tvar divElem = document.createElement(\"div\");\r\n\t\tdivElem.classList.add(\"item\");\r\n\t\tdivElem.setAttribute(\"data-index\", index);\r\n\t\tvar imgElem = document.createElement(\"img\");\r\n\t\timgElem.src = gif.preview.url;\r\n\t\timgElem.style.width = gif.preview.width +\"px\";\r\n\t\timgElem.style.height = gif.preview.height +\"px\";\r\n\t\tvar divInfoElem = document.createElement(\"div\");\r\n\t\tdivElem.appendChild(imgElem);\r\n\t\tdivElem.appendChild(divInfoElem);\r\n\t\t//divInfoElem.innerHTML = index;\r\n\t\treturn divElem;\r\n\t}\r\n\r\n\tclearView(){\r\n\t\tvar childNodes = this.parentElem.childNodes;\r\n\t\tif (childNodes){\r\n\t\t\tfor (let counter = childNodes.length-1; counter>=0; counter--){\r\n\t\t\t\tthis.parentElem.removeChild(childNodes[counter]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearEvents(){\r\n\t\tthis.elems.searchBtnElem.removeEventListener(\"click\", this.onSearchClickBind);\r\n\t\tthis.elems.searchTextElem.removeEventListener(\"keydown\", this.onSearchTextKeyDownBind);\r\n\t\tdocument.removeEventListener(\"scroll\", this.onScrollBind);\r\n\t}\r\n\r\n\tdestroyView(){\r\n\t\tthis.clearView();\r\n\t\tthis.clearEvents();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/search-list-view.js"],"sourceRoot":""}